define(function(require){function t(t){function r(){}var n;return Object.create?n=Object.create(t):(r.prototype=t,n=new r),n}var OP=Object.prototype,AP=Array.prototype,FP=Function.prototype,SP=String.prototype,r=OP.hasOwnProperty,n=AP.slice;FP.bind||(FP.bind=function(r){function e(){if(this instanceof e){var a=t(i.prototype),u=i.apply(a,o.concat(n.call(arguments)));return Object(u)===u?u:a}return i.apply(r,o.concat(n.call(arguments)))}var i=this;if("function"!=typeof i)throw new TypeError("Bind must be called on a function");var o=n.call(arguments,1);return e}),Object.keys||(Object.keys=function(){var t=!{toString:""}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],e=n.length;return function(i){if(i!==Object(i))throw new TypeError(i+" is not an object");var o=[];for(var a in i)r.call(i,a)&&o.push(a);if(t)for(var u=0;e>u;u++)r.call(i,n[u])&&o.push(n[u]);return o}}()),Array.isArray||(Array.isArray=function(t){return"[object Array]"===OP.toString.call(t)}),AP.forEach||(AP.forEach=function(t,r){for(var n=0,e=this.length>>>0;e>n;n++)n in this&&t.call(r,this[n],n,this)}),AP.map||(AP.map=function(t,r){for(var n=this.length>>>0,e=new Array(n),i=0;n>i;i++)i in this&&(e[i]=t.call(r,this[i],i,this));return e}),AP.filter||(AP.filter=function(t,r){for(var n,e=[],i=0,o=this.length>>>0;o>i;i++)i in this&&(n=this[i],t.call(r,n,i,this)&&e.push(n));return e}),AP.every||(AP.every=function(t,r){for(var n=0,e=this.length>>>0;e>n;n++)if(n in this&&!t.call(r,this[n],n,this))return!1;return!0}),AP.some||(AP.some=function(t,r){for(var n=0,e=this.length>>>0;e>n;n++)if(n in this&&t.call(r,this[n],n,this))return!0;return!1}),AP.reduce||(AP.reduce=function(t){if("function"!=typeof t)throw new TypeError(t+" is not an function");var r,n=this.length>>>0,e=0;if(arguments.length>1)r=arguments[1];else for(;;){if(e in this){r=this[e++];break}if(++e>=n)throw new TypeError("reduce of empty array with on initial value")}for(;n>e;e++)e in this&&(r=t.call(null,r,this[e],e,this));return r}),AP.reduceRight||(AP.reduceRight=function(t){if("function"!=typeof t)throw new TypeError(t+" is not an function");var r,n=this.length>>>0,e=n-1;if(arguments.length>1)r=arguments[1];else for(;;){if(e in this){r=this[e--];break}if(--e<0)throw new TypeError("reduce of empty array with on initial value")}for(;e>=0;e--)e in this&&(r=t.call(null,r,this[e],e,this));return r}),AP.indexOf||(AP.indexOf=function(t,r){var n=this.length>>>0;for(r=Number(r)||0,r=Math[0>r?"ceil":"floor"](r),0>r&&(r=Math.max(r+n,0));n>r;r++)if(r in this&&this[r]===t)return r;return-1}),AP.lastIndexOf||(AP.lastIndexOf=function(t,r){var n=this.length>>>0;for(r=Number(r)||n-1,r=Math[0>r?"ceil":"floor"](r),0>r&&(r+=n),r=Math.min(r,n-1);r>=0;r--)if(r in this&&this[r]===t)return r;return-1}),SP.trim||(SP.trim=function(){var t=["\\s","00A0","1680","180E","2000-\\u200A","200B","2028","2029","202F","205F","3000"].join("\\u"),r=new RegExp("^["+t+"]+"),n=new RegExp("["+t+"]+$");return function(){return String(this).replace(r,"").replace(n,"")}}()),Date.now||(Date.now=function(){return+new Date})});